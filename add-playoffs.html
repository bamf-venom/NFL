<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playoff-Spiele hinzuf√ºgen</title>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: #1a1a2e;
      color: #eee;
    }
    .log {
      background: #16213e;
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
      max-height: 500px;
      overflow-y: auto;
      font-family: monospace;
      font-size: 14px;
    }
    .log-entry { margin: 5px 0; }
    .success { color: #4ade80; }
    .error { color: #f87171; }
    .info { color: #60a5fa; }
    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px 5px;
    }
    button:hover { background: #2563eb; }
    button:disabled { background: #6b7280; cursor: not-allowed; }
    h1 { color: #60a5fa; }
    .status { 
      padding: 10px 20px; 
      border-radius: 8px; 
      margin: 10px 0;
      font-weight: bold;
    }
    .status.pending { background: #fbbf24; color: #1a1a2e; }
    .status.success { background: #4ade80; color: #1a1a2e; }
    .status.error { background: #f87171; color: #1a1a2e; }
  </style>
</head>
<body>
  <h1>üèà NFL Playoff-Spiele 2025-26</h1>
  
  <div id="auth-status" class="status pending">Bitte einloggen...</div>
  
  <div id="login-form">
    <input type="email" id="email" placeholder="Email" value="info@mbpvfx.com" style="padding: 10px; margin: 5px; border-radius: 4px; border: none;">
    <input type="password" id="password" placeholder="Passwort" style="padding: 10px; margin: 5px; border-radius: 4px; border: none;">
    <button onclick="login()">Einloggen</button>
  </div>
  
  <div id="actions" style="display: none;">
    <button onclick="addPlayoffGames()" id="add-btn">Playoff-Spiele hinzuf√ºgen</button>
    <button onclick="window.location.href='pages/games.html'">Zur Spiel√ºbersicht</button>
  </div>
  
  <div class="log" id="log"></div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBhhPFVV_cyH5kPMVFM55gpeMvCms8-l9U",
      authDomain: "projekt1-95e74.firebaseapp.com",
      projectId: "projekt1-95e74",
      storageBucket: "projekt1-95e74.firebasestorage.app",
      messagingSenderId: "204324789350",
      appId: "1:204324789350:web:c54182f94b57a8e5a521a7"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const collections = {
      games: () => db.collection('games'),
      users: () => db.collection('users')
    };

    function log(message, type = 'info') {
      const logEl = document.getElementById('log');
      const entry = document.createElement('div');
      entry.className = `log-entry ${type}`;
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      logEl.appendChild(entry);
      logEl.scrollTop = logEl.scrollHeight;
      console.log(message);
    }

    async function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      try {
        log('Versuche Login...', 'info');
        await auth.signInWithEmailAndPassword(email, password);
        
        const user = auth.currentUser;
        const userDoc = await collections.users().doc(user.uid).get();
        
        if (userDoc.exists && userDoc.data().is_admin) {
          document.getElementById('auth-status').textContent = '‚úÖ Eingeloggt als Admin';
          document.getElementById('auth-status').className = 'status success';
          document.getElementById('login-form').style.display = 'none';
          document.getElementById('actions').style.display = 'block';
          log('Erfolgreich als Admin eingeloggt!', 'success');
        } else {
          log('Kein Admin-Zugang!', 'error');
          document.getElementById('auth-status').textContent = '‚ùå Kein Admin-Zugang';
          document.getElementById('auth-status').className = 'status error';
        }
      } catch (error) {
        log(`Login fehlgeschlagen: ${error.message}`, 'error');
        document.getElementById('auth-status').textContent = '‚ùå Login fehlgeschlagen';
        document.getElementById('auth-status').className = 'status error';
      }
    }

    const PLAYOFF_GAMES = [
      // Wild Card Weekend (Week 19)
      { home_team: 'New England Patriots', away_team: 'Los Angeles Chargers', home_team_abbr: 'NE', away_team_abbr: 'LAC', game_date: '2026-01-10T20:00:00', week: 19, season: '2025', home_score: 16, away_score: 3, status: 'finished' },
      { home_team: 'Buffalo Bills', away_team: 'Jacksonville Jaguars', home_team_abbr: 'BUF', away_team_abbr: 'JAX', game_date: '2026-01-11T19:00:00', week: 19, season: '2025', home_score: 27, away_score: 24, status: 'finished' },
      { home_team: 'Houston Texans', away_team: 'Pittsburgh Steelers', home_team_abbr: 'HOU', away_team_abbr: 'PIT', game_date: '2026-01-11T22:30:00', week: 19, season: '2025', home_score: 30, away_score: 6, status: 'finished' },
      { home_team: 'Chicago Bears', away_team: 'Green Bay Packers', home_team_abbr: 'CHI', away_team_abbr: 'GB', game_date: '2026-01-11T19:00:00', week: 19, season: '2025', home_score: 31, away_score: 27, status: 'finished' },
      { home_team: 'San Francisco 49ers', away_team: 'Philadelphia Eagles', home_team_abbr: 'SF', away_team_abbr: 'PHI', game_date: '2026-01-12T19:00:00', week: 19, season: '2025', home_score: 23, away_score: 19, status: 'finished' },
      { home_team: 'Los Angeles Rams', away_team: 'Carolina Panthers', home_team_abbr: 'LAR', away_team_abbr: 'CAR', game_date: '2026-01-12T22:30:00', week: 19, season: '2025', home_score: 34, away_score: 31, status: 'finished' },
      
      // Divisional Playoffs (Week 20)
      { home_team: 'Denver Broncos', away_team: 'Buffalo Bills', home_team_abbr: 'DEN', away_team_abbr: 'BUF', game_date: '2026-01-17T20:00:00', week: 20, season: '2025', home_score: 33, away_score: 30, status: 'finished' },
      { home_team: 'New England Patriots', away_team: 'Houston Texans', home_team_abbr: 'NE', away_team_abbr: 'HOU', game_date: '2026-01-18T19:00:00', week: 20, season: '2025', home_score: 28, away_score: 16, status: 'finished' },
      { home_team: 'Seattle Seahawks', away_team: 'San Francisco 49ers', home_team_abbr: 'SEA', away_team_abbr: 'SF', game_date: '2026-01-17T23:30:00', week: 20, season: '2025', home_score: 41, away_score: 6, status: 'finished' },
      { home_team: 'Los Angeles Rams', away_team: 'Chicago Bears', home_team_abbr: 'LAR', away_team_abbr: 'CHI', game_date: '2026-01-18T22:30:00', week: 20, season: '2025', home_score: 20, away_score: 17, status: 'finished' },
      
      // Conference Championships (Week 21)
      { home_team: 'Denver Broncos', away_team: 'New England Patriots', home_team_abbr: 'DEN', away_team_abbr: 'NE', game_date: '2026-01-25T21:00:00', week: 21, season: '2025', home_score: 7, away_score: 10, status: 'finished' },
      { home_team: 'Seattle Seahawks', away_team: 'Los Angeles Rams', home_team_abbr: 'SEA', away_team_abbr: 'LAR', game_date: '2026-01-25T00:30:00', week: 21, season: '2025', home_score: 31, away_score: 27, status: 'finished' },
      
      // Super Bowl LX (Week 22)
      { home_team: 'Seattle Seahawks', away_team: 'New England Patriots', home_team_abbr: 'SEA', away_team_abbr: 'NE', game_date: '2026-02-08T00:30:00', week: 22, season: '2025', home_score: 29, away_score: 13, status: 'finished' }
    ];

    async function addPlayoffGames() {
      const btn = document.getElementById('add-btn');
      btn.disabled = true;
      btn.textContent = 'Wird hinzugef√ºgt...';
      
      log('üèà Starte Hinzuf√ºgen der NFL Playoff-Spiele 2025-26...', 'info');
      
      let successCount = 0;
      let errorCount = 0;
      
      for (const game of PLAYOFF_GAMES) {
        try {
          const gameId = db.collection('_').doc().id;
          const gameDoc = {
            id: gameId,
            home_team: game.home_team,
            away_team: game.away_team,
            home_team_abbr: game.home_team_abbr,
            away_team_abbr: game.away_team_abbr,
            game_date: firebase.firestore.Timestamp.fromDate(new Date(game.game_date)),
            week: game.week,
            season: game.season,
            home_score: game.home_score,
            away_score: game.away_score,
            status: game.status,
            created_at: firebase.firestore.FieldValue.serverTimestamp()
          };
          
          await collections.games().doc(gameId).set(gameDoc);
          
          const weekName = game.week === 19 ? 'Wild Card' : 
                           game.week === 20 ? 'Divisional' : 
                           game.week === 21 ? 'Conf. Championship' : 
                           'Super Bowl';
          
          log(`‚úÖ ${weekName}: ${game.away_team_abbr} @ ${game.home_team_abbr} (${game.away_score}:${game.home_score})`, 'success');
          successCount++;
          
          await new Promise(resolve => setTimeout(resolve, 200));
        } catch (error) {
          log(`‚ùå Fehler bei ${game.away_team_abbr} @ ${game.home_team_abbr}: ${error.message}`, 'error');
          errorCount++;
        }
      }
      
      log(``, 'info');
      log(`üéâ Fertig! ${successCount} Playoff-Spiele hinzugef√ºgt, ${errorCount} Fehler`, successCount > 0 ? 'success' : 'error');
      log(`üìä Wild Card (Woche 19): 6 Spiele`, 'info');
      log(`üìä Divisional (Woche 20): 4 Spiele`, 'info');
      log(`üìä Conference Championships (Woche 21): 2 Spiele`, 'info');
      log(`üìä Super Bowl LX (Woche 22): 1 Spiel`, 'info');
      
      btn.textContent = 'Fertig! ‚úì';
    }
  </script>
</body>
</html>
